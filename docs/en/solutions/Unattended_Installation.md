---
products: 
  - Alauda Container Platform
kind:
  - Solution
---

# Unattended Installation of Alauda Cloud Platform (ACP)

## Feature Overview

**Main capabilities:**

- Unattended installation.
- Specify a configuration file to facilitate installation.
- A dry-run mode that only crafts and prints the configuration file.
- The script can be configured to wait infinitely till the installation of ACP has finished. Otherwise, it returns immediately after the installation has been triggered.


**Limitations:**

- All nodes _MUST_ share the same SSH configuration. If you need to specify SSH configuration per nodes, you have to edit the configuration file generated by the script.
- GPU-related configurations are currently not supported.
- The user workloads are not allowed to run on the control-plane nodes in an unattended installation.

## Prerequisites

For the full list of environment requirements, see the [Prerequisites](https://docs.alauda.io/container_platform/4.1/install/prepare/prerequisites.html) section.

:::info
**ACP versions verified to work with this script:**

- v3.12.x
- v3.14.x
- v4.1.x
:::

## Install the ACP

<Steps>

### Download and extract the ACP installer tarball file

### Start the installer

See [Start the installer](https://docs.alauda.io/container_platform/4.1/install/installing.html#start_installer) for detailed steps.

### Download and execute the installation script

Put the downloaded [installation script](https://raw.githubusercontent.com/alauda/knowledge/9b147b69045d7c84c709233c3c21397d1adcd7e3/docs/public/unattended_installation/platform-install.sh) into the extracted installer directory. Then execute it through the following command:
```shell
bash platform-install.sh <options>
```

:::warning
- The values of `--cri-version` and `--cluster-version` must match the versions shipped with the installer package, which can be found in the ACP baseline documentation.
- The script performs only basic checks on input parameters. You must ensure that all parameter values are valid.
- The script can not verify whether all nodes meet the prerequisites of the ACP installation. You _MUST_ check the configurations of all nodes manually before starting the installation.
:::

:::info
Options:
    `--installer-ip`                      IP address of the host where the installer runs. Default: `127.0.0.1`.
    `--config-file`                       Path to an existing configuration file. When this is set, all parameters except `--installer-ip`, `--dry-run`, and `--wait` are ignored.
    `--dry-run`                           Generate and display the configuration file only, without starting the actual installation. Default: `false`.
    `--wait`                              Wait for the deployment to complete before the script exits. Default: `true`.
    `--admin-username`                    Username of the platform administrator. Default: `admin`.
    `--admin-password`                    Password of the platform administrator.
    `--cluster-version`                   Kubernetes version. This parameter is mandatory.
    `--cri-version`                       CRI type and version. Default: `containerd://1.6.20-4`.
                                         You can obtain the supported Kubernetes and CRI versions as follows:
                                         `curl -H "Authorization: Bearer <TOKEN>" ${INSTALLER_IP}:8080/api/v1/namespaces/kube-public/configmaps/base-component-version`
                                         Here `<TOKEN>` can be retrieved with `curl ${INSTALLER_IP}:8080//cpaas-installer/api/token`.
    `--self-vip`                          Whether to enable a self-managed VIP. Default: `false`.
    `--vrid`                              VRID used by the self-managed VIP. Range: `1â€“255`. VRIDs must be unique within the same subnet. Default: `137`.
    `--cluster-ha`                        HA address of the global cluster.
    `--platform-domain`                   Platform access address, either an IP address or a domain name.
    `--platform-http`                     HTTP port used to access the platform. Default: `0`. A value of `0` disables HTTP access.
    `--platform-https`                    HTTPS port used to access the platform. Default: `443`.
    `--tls-cert-file`                     File path of the TLS certificate for the platform access address. When omitted, a self-signed certificate is used.
    `--tls-key-file`                      File path of the TLS private key for the platform access address. When omitted, a self-signed certificate is used.
    `--external-registry-address`         Address of an external image registry. When omitted, the platform-provided registry is used.
    `--registry-domain`                   Registry domain name. When using the platform-provided registry, the default is the same as `--cluster-ha`.
    `--registry-username`                 Username for the registry, if authentication is required.
    `--registry-password`                 Password for the registry user.
    `--cni-type`                          CNI type. Valid values: `ovn`, `calico`. Default: `ovn`.
    `--dual-stack`                        Whether to enable dual-stack networking. Default: `false`.
    `--network-device`                    Network interface name. No default value.
    `--cluster-cidr-ipv4`                 IPv4 cluster CIDR of the global cluster. Default: `10.3.0.0/16`.
    `--service-cidr-ipv4`                 IPv4 service CIDR of the global cluster. Default: `10.4.0.0/16`.
    `--join-cidr-ipv4`                    IPv4 join CIDR when using OVN as the CNI in the global cluster. Default: `100.64.0.0/16`.
    `--cluster-cidr-ipv6`                 IPv6 cluster CIDR of the global cluster. Default: `fd00:10:16::/64`.
    `--service-cidr-ipv6`                 IPv6 service CIDR of the global cluster. Default: `fd00:10:96::/112`.
    `--join-cidr-ipv6`                    IPv6 join CIDR when using OVN as the CNI in the global cluster. Default: `fd00:100:64::/64`.
    `--hostname-as-node-name`             Use the host name as the node name. When set to `false`, the node IP address is used instead. Default: `false`.
    `--node-isolate`                      Enable platform node isolation for the global cluster. When enabled, platform components are restricted to control-plane nodes. Default: `false`.
    `--control-planes`                    IPv4 addresses of control-plane nodes, separated by commas, for example: `192.168.1.1,192.168.1.2,192.168.1.3`.
    `--workers`                           IPv4 addresses of worker nodes, separated by commas.
    `--control-planes-ipv6`               IPv6 addresses of control-plane nodes. Required for dual-stack. Comma-separated and aligned one-to-one with `--control-planes`.
    `--workers-ipv6`                      IPv6 addresses of worker nodes. Required for dual-stack. Comma-separated and aligned one-to-one with `--workers`.
    `--control-planes-app-deployable`     Allow applications to be scheduled on control-plane nodes. Default: `false`. This setting has no effect when `--node-isolate` is enabled.
    `--ssh-port`                          SSH service port. Default: `22`.
    `--ssh-username`                      SSH username. Default: `root`.
    `--ssh-password`                      SSH login password.
    `--ssh-key-file`                      Path to the SSH private key file used for login.
    `--prometheus-nodes`                  IPv4 addresses of nodes where Prometheus should be deployed, comma-separated. Leave empty to skip deploying Prometheus.
    `--victoriametrics-nodes`             IPv4 addresses of nodes where VictoriaMetrics should be deployed, comma-separated. Leave empty to skip deploying VictoriaMetrics.
    `--victoriametrics-agent-replicas`    Number of VictoriaMetrics Agent replicas to deploy.
    `--elasticsearch-nodes`               IPv4 addresses of nodes where Elasticsearch should be deployed, comma-separated. Leave empty to skip deploying Elasticsearch.
    `--node-max-pods`                     Maximum number of Pods allowed per node. Default: `110`.
    `--alternative-hosts`                 Additional access addresses for the platform, comma-separated.
    `--products`                          Products to deploy, comma-separated. `base` and `acp` are mandatory. Default: `base,acp,devops,asm,dataServices`.
:::


#### Example
```shell
bash platform-install.sh \
    --admin-password 'password' \
    --self-vip true --vrid 219 \
    --cri-version containerd://1.7.27-4 --cluster-version 1.32.7 \
    --cluster-ha 192.168.137.42 \
    --platform-domain 192.168.137.42 \
    --control-planes 192.168.130.220,192.168.137.238,192.168.131.232 \
    --ssh-password 'AlMdCcQfgiEEEawVBIz6' \
    --products 'base,acp'
```
</Steps>
